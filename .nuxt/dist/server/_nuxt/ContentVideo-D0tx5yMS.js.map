{"version":3,"file":"ContentVideo-D0tx5yMS.js","sources":["../../../../components/content/ContentVideo.vue"],"sourcesContent":["<template>\n  <section class=\"m-video-wrap\">\n    <div class=\"container\">\n      <HumbleScroll animation=\"zoom-out fade up\" :once=\"true\">\n        <div\n          :id=\"id ? id : uid\"\n          ref=\"sectionEl\"\n          :class=\"`m-video m-video--${uid} ${videoIsPlay ? 'is-play' : ''}`\"\n        >\n          <ContentTitle\n            v-if=\"title\"\n            ref=\"titleEl\"\n            is=\"h2\"\n            :title\n            class=\"m-video__title\"\n          />\n\n          <video\n            v-if=\"!loop\"\n            ref=\"videoEl\"\n            class=\"m-video__video m-video__video--active\"\n            playsinline\n            disablepictureinpicture\n            preload=\"metadata\"\n            :controls=\"videoIsPlay ? 'controls' : null\"\n            @play=\"onPlay\"\n            @pause=\"onStop\"\n            @ended=\"onStop\"\n          >\n            <source :src=\"url\" type=\"video/mp4\" />\n          </video>\n          <template v-else>\n            <video\n              ref=\"loopEl\"\n              class=\"m-video__video m-video--loop\"\n              :class=\"{'is-active': !videoIsPlay}\"\n              playsinline\n              disablepictureinpicture\n              muted\n              loop\n              background\n            >\n              <source :src=\"loop\" type=\"video/mp4\" />\n            </video>\n            <video\n              ref=\"videoEl\"\n              class=\"m-video__video m-video--full\"\n              :class=\"{'is-active': videoIsPlay}\"\n              playsinline\n              disablepictureinpicture\n              :preload=\"videoIsInit ? 'auto' : 'none'\"\n              controls\n              @play=\"onPlay\"\n              @pause=\"onStop\"\n              @ended=\"onStop\"\n            >\n              <source :src=\"url\" type=\"video/mp4\" />\n            </video>\n          </template>\n\n          <div class=\"m-video__overlay\" @click=\"playOrPause\"></div>\n        </div>\n      </HumbleScroll>\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport ContentTitle from \"./ContentTitle\";\n\nconst uid = useState(\"uid\", () => useId());\n\n// elements\nconst loopEl = useTemplateRef(\"loopEl\");\nconst videoEl = useTemplateRef(\"videoEl\");\n\n// boolean\nconst videoIsPlay = ref(false);\nconst videoIsInit = ref(false);\n\nconst props = defineProps({\n  id: {\n    type: String,\n    default: \"\",\n  },\n  title: {\n    type: String,\n    default: \"\",\n  },\n  loop: {\n    type: String,\n    default: \"\",\n  },\n  url: {\n    type: String,\n    required: true,\n  },\n});\n\n// Methods\nconst playOrPause = (e) => {\n  e.preventDefault();\n\n  if (videoIsPlay.value) {\n    videoEl.value?.pause();\n  } else {\n    videoEl.value?.play();\n  }\n};\n\nconst onPlay = () => {\n  videoEl.value?.scrollIntoView({\n    behavior: \"smooth\",\n    block: \"center\",\n    inline: \"center\",\n  });\n\n  setTimeout(() => {\n    videoIsPlay.value = true;\n    // titleEl.value?.reverse()\n  }, 500);\n\n  setTimeout(() => {\n    videoEl.value?.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"center\",\n      inline: \"center\",\n    });\n  }, 1500);\n\n  document.documentElement.classList.add(\"is-overflow-hidden\");\n};\n\nconst onStop = () => {\n  document.documentElement.classList.remove(\"is-overflow-hidden\");\n  videoIsPlay.value = false;\n  // titleEl.value?.play()\n};\n\nonMounted(() => {\n  // imitate autoplay\n  if (!!props.loop) {\n    loopEl.value.play();\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"rfs/scss\";\n\n.m-video-wrap {\n  position: relative;\n  z-index: 10;\n}\n\n.m-video {\n  @include rfs(8rem, --margin);\n\n  --shadow-bg: rgb(212 109 132);\n  --shadow-size: 0.75rem;\n\n  position: relative;\n  border-radius: 3rem;\n  width: 100%;\n  margin-inline: auto;\n  aspect-ratio: 16/9;\n  // transform: translateY(100px);\n  margin-block-end: var(--shadow-size);\n\n  margin-block-start: var(--margin);\n  margin-block-end: calc(var(--margin) + var(--shadow-size));\n\n  &.is-play {\n    border-radius: 0;\n    z-index: 1000;\n\n    &::before {\n      display: none;\n    }\n  }\n\n  &:not(.is-play) {\n    cursor: none;\n\n    &:hover {\n      .m-video__icon {\n        opacity: 1;\n        transform: scale(1);\n      }\n    }\n  }\n\n  &,\n  &::before,\n  &__video {\n    border-radius: 3rem;\n  }\n\n  &__video,\n  &::before {\n    border-style: solid;\n    border-color: var(--fo-black, #000);\n    border-width: var(--fo-border-width, 2px);\n  }\n\n  &::before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    bottom: calc(-1 * var(--shadow-size));\n    left: var(--shadow-size);\n    width: 100%;\n    height: 100%;\n    background-color: var(--shadow-bg);\n    transform: translate(var(--translate-x, 0), var(--translate-y, 0));\n    z-index: -1;\n  }\n\n  &__title {\n    color: var(--fo-white);\n    position: absolute;\n    top: 13%;\n    left: 50%;\n    transform: translateX(-50%);\n    opacity: 1;\n    z-index: 3;\n    transition: opacity 0.5s;\n    margin-block-end: 0 !important;\n  }\n\n  &__video {\n    background-color: #000;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n\n    transform-origin: 50%;\n    transform: translate(-50%, -50%);\n    transition:\n      width 1.5s ease-in-out,\n      height 1s ease-in-out,\n      border-radius 0.2s;\n\n    &.is-active {\n      z-index: 2;\n    }\n  }\n\n  &__overlay {\n    background-color: rgb(0 0 255 / 0%);\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 4;\n    width: 100%;\n    height: 100%;\n  }\n\n  &.is-play .m-video__video {\n    position: fixed;\n    width: 100vw;\n    width: 100dvw;\n    max-width: none;\n    height: 100vh;\n    height: 100dvh;\n    // z-index: 1000;\n    border-radius: 0;\n  }\n}\n</style>\n"],"names":["_a"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,UAAM,MAAM,SAAS,OAAO,MAAM,OAAO;AAGnC,UAAA,SAAS,eAAe,QAAQ;AAChC,UAAA,UAAU,eAAe,SAAS;AAGlC,UAAA,cAAc,IAAI,KAAK;AACvB,UAAA,cAAc,IAAI,KAAK;AAsBvB,UAAA,cAAc,CAAC,MAAM;;AACzB,QAAE,eAAe;AAEjB,UAAI,YAAY,OAAO;AACrB,sBAAQ,UAAR,mBAAe;AAAA,MAAM,OAChB;AACL,sBAAQ,UAAR,mBAAe;AAAA,MAAK;AAAA,IAExB;AAEA,UAAM,SAAS,MAAM;;AACnB,oBAAQ,UAAR,mBAAe,eAAe;AAAA,QAC5B,UAAU;AAAA,QACV,OAAO;AAAA,QACP,QAAQ;AAAA,MAAA;AAGV,iBAAW,MAAM;AACf,oBAAY,QAAQ;AAAA,SAEnB,GAAG;AAEN,iBAAW,MAAM;;AACf,SAAAA,MAAA,QAAQ,UAAR,gBAAAA,IAAe,eAAe;AAAA,UAC5B,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ;AAAA,QAAA;AAAA,SAET,IAAI;AAEE,MAAA,SAAA,gBAAgB,UAAU,IAAI,oBAAoB;AAAA,IAC7D;AAEA,UAAM,SAAS,MAAM;AACV,MAAA,SAAA,gBAAgB,UAAU,OAAO,oBAAoB;AAC9D,kBAAY,QAAQ;AAAA,IAEtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}