import{i as L,q as P,W as $,af as k,a1 as V,a0 as G,r as X,m as C,D as q}from"./DthWgLLV.js";function F(e){return V()?(G(e),!0):!1}function a(e){return typeof e=="function"?e():L(e)}const B=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R=Object.prototype.toString,U=e=>R.call(e)==="[object Object]",z=()=>{};function I(e,r={}){if(!P(e))return $(e);const o=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const l in e.value)o[l]=k(()=>({get(){return e.value[l]},set(u){var s;if((s=a(r.replaceRef))!=null?s:!0)if(Array.isArray(e.value)){const p=[...e.value];p[l]=u,e.value=p}else{const p={...e.value,[l]:u};Object.setPrototypeOf(p,Object.getPrototypeOf(e.value)),e.value=p}else e.value[l]=u}}));return o}const _=B?window:void 0;function J(e){var r;const o=a(e);return(r=o==null?void 0:o.$el)!=null?r:o}function M(...e){let r,o,l,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,l,u]=e,r=_):[r,o,l,u]=e,!r)return z;Array.isArray(o)||(o=[o]),Array.isArray(l)||(l=[l]);const s=[],y=()=>{s.forEach(c=>c()),s.length=0},p=(c,d,i,f)=>(c.addEventListener(d,i,f),()=>c.removeEventListener(d,i,f)),v=q(()=>[J(r),a(u)],([c,d])=>{if(y(),!c)return;const i=U(d)?{...d}:d;s.push(...o.flatMap(f=>l.map(w=>p(c,f,w,i))))},{immediate:!0,flush:"post"}),h=()=>{v(),y()};return F(h),h}function Q(e,r={}){var o,l;const{pointerTypes:u,preventDefault:s,stopPropagation:y,exact:p,onMove:v,onEnd:h,onStart:c,initialValue:d,axis:i="both",draggingElement:f=_,containerElement:w,handle:S=e,buttons:Y=[0]}=r,g=X((o=a(d))!=null?o:{x:0,y:0}),m=X(),D=t=>u?u.includes(t.pointerType):!0,W=t=>{a(s)&&t.preventDefault(),a(y)&&t.stopPropagation()},b=t=>{var A;if(!a(Y).includes(t.button)||a(r.disabled)||!D(t)||a(p)&&t.target!==a(e))return;const x=a(w),O=(A=x==null?void 0:x.getBoundingClientRect)==null?void 0:A.call(x),E=a(e).getBoundingClientRect(),T={x:t.clientX-(x?E.left-O.left+x.scrollLeft:E.left),y:t.clientY-(x?E.top-O.top+x.scrollTop:E.top)};(c==null?void 0:c(T,t))!==!1&&(m.value=T,W(t))},H=t=>{if(a(r.disabled)||!D(t)||!m.value)return;const A=a(w),x=a(e).getBoundingClientRect();let{x:O,y:E}=g.value;(i==="x"||i==="both")&&(O=t.clientX-m.value.x,A&&(O=Math.min(Math.max(0,O),A.scrollWidth-x.width))),(i==="y"||i==="both")&&(E=t.clientY-m.value.y,A&&(E=Math.min(Math.max(0,E),A.scrollHeight-x.height))),g.value={x:O,y:E},v==null||v(g.value,t),W(t)},n=t=>{a(r.disabled)||!D(t)||m.value&&(m.value=void 0,h==null||h(g.value,t),W(t))};if(B){const t={capture:(l=r.capture)!=null?l:!0};M(S,"pointerdown",b,t),M(f,"pointermove",H,t),M(f,"pointerup",n,t)}return{...I(g),position:g,isDragging:C(()=>!!m.value),style:C(()=>`left:${g.value.x}px;top:${g.value.y}px;`)}}const K={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function Z(e={}){const{type:r="page",touch:o=!0,resetOnTouchEnds:l=!1,initialValue:u={x:0,y:0},window:s=_,target:y=s,scroll:p=!0,eventFilter:v}=e;let h=null,c=0,d=0;const i=X(u.x),f=X(u.y),w=X(null),S=typeof r=="function"?r:K[r],Y=n=>{const t=S(n);h=n,t&&([i.value,f.value]=t,w.value="mouse"),s&&(c=s.scrollX,d=s.scrollY)},g=n=>{if(n.touches.length>0){const t=S(n.touches[0]);t&&([i.value,f.value]=t,w.value="touch")}},m=()=>{if(!h||!s)return;const n=S(h);h instanceof MouseEvent&&n&&(i.value=n[0]+s.scrollX-c,f.value=n[1]+s.scrollY-d)},D=()=>{i.value=u.x,f.value=u.y},W=v?n=>v(()=>Y(n),{}):n=>Y(n),b=v?n=>v(()=>g(n),{}):n=>g(n),H=v?()=>v(()=>m(),{}):()=>m();if(y){const n={passive:!0};M(y,["mousemove","dragover"],W,n),o&&r!=="movement"&&(M(y,["touchstart","touchmove"],b,n),l&&M(y,"touchend",D,n)),p&&r==="page"&&M(s,"scroll",H,{passive:!0})}return{x:i,y:f,sourceType:w}}export{Z as a,Q as u};
